---
title: コードハイライト
weight: 5
starryNight: true
---

# コードハイライト

Methanol は [Starry Night](https://github.com/wooorm/starry-night) を使ってコードハイライトを行います（`rehype-starry-night` 経由）。デフォルトではパフォーマンスのため無効です。

## 有効化・無効化

`methanol.config.*` に `starryNight` を追加します。

```js
// methanol.config.js
export default () => ({
	starryNight: true
})
```

明示的に無効にする場合:

```js
// methanol.config.js
export default () => ({
	starryNight: false
})
```

CLI で一時的に切り替え:

```bash
npx methanol build --code-highlighting
npx methanol build --code-highlighting false
```

## ページ単位の上書き

フロントマターが常に優先されます。

```mdx
---
starryNight: true
---
```

## ほかのハイライターに置き換える

別のハイライターを使う場合:

1) `starryNight: false` で無効化
2) `mdx` 設定で別のプラグインを追加

```js
export default () => ({
	starryNight: false,
	mdx: () => ({
		rehypePlugins: [/* 任意のハイライト用プラグイン */]
	})
})
```

## スタイル

Methanol はコードスタイルを自動で挿入しません。テーマ側で必要な CSS を読み込んでください。

## 追加言語

Starry Night には基本の文法が含まれています。追加したい場合は `starryNight.grammars` に指定します。

```js
import { common } from '@wooorm/starry-night'
import sourceMDX from '@wooorm/starry-night/source.mdx'

export default () => ({
	starryNight: {
		grammars: [...common, sourceMDX]
	}
})
```

文法を読み込むために `@wooorm/starry-night` をプロジェクトに追加する必要があります。
